name: ğŸ“ Publier articles Notion

on:
  workflow_dispatch:

permissions:
  contents: write

jobs:
  publish:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ Checkout
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: ğŸ Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: ğŸ“¦ DÃ©pendances
        run: pip install -r _scripts/requirements.txt

      - name: ğŸš€ Publier
        env:
          NOTION_API_KEY: ${{ secrets.NOTION_API_KEY }}
          NOTION_DATABASE_ID: ${{ secrets.NOTION_DATABASE_ID }}
          ARTICLES_JSON_PATH: blog/articles.json
          TEMPLATE_PATH: _templates/article.html
          OUTPUT_DIR: blog/articles
          SITEMAP_PATH: sitemap.xml
        run: python _scripts/publish.py
